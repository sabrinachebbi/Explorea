{# carte d'annonce princial pour un activity#}
<div class="card" data-activity-id="{{ activity.id }}">
    {#Affichage de l'image associée à l'activité#}
    {% if activity.picture %}
        <img class="activity-image" src="{{ vich_uploader_asset(activity.picture, 'activityImageFile') }}" alt="Image de l'activité">

    {% else %}
        <p>Aucune image disponible pour cette activité.</p>
    {% endif %}

    {#  ajouter ou retirer l'activité des favoris#}
    <div class="favorite-button">
        <a href="{{ path('toggle-favorite_activity', { 'id': activity.id }) }}">
            {% if app.user and app.user.favoriteActivities.contains(activity) %}
                <img src="{{ asset('images/addFavorite.jpg') }}" alt="Retirer des favoris" class="favorite-icon filled">
            {% else %}
                <img src="{{ asset('images/retireFavorite.png') }}" alt="Ajouter aux favoris" class="favorite-icon empty">
            {% endif %}
        </a>
    </div>

    <h4>{{ activity.title }}</h4>

    <div class="position">
        <img class="locate" src="{{ asset('images/adresse.png') }}" alt="adresse">
        <div class="title-first"> {{ activity.city.name }}, {{ activity.city.country.name }}</div>
    </div>

    <p>{{ activity.duration }} jours</p>
    <p>{{ activity.description }}</p>
    <button class="price">{{ activity.price }}£</button>
    <div>{{ activity.category.name }}</div>
    {# boutons crud (afficher les details ,éditer , supprimer #}
    <div class="btn-crud">
        <a href="{{ path('app_activity_showDetails', { 'id': activity.id }) }}">
            <img src="{{ asset('images/info.png') }}" alt="Voir les détails" class="btn-show">
        </a>

        {% if is_granted('ROLE_HOST') and activity.host.id == app.user.id or is_granted('ROLE_ADMIN') %}
            <a href="{{ path('app_activity_update', { 'id': activity.id }) }}" class="btn-edit">
                <img src="{{ asset('images/pen.png') }}" alt="Éditer" class="btn-edit">
            </a>

            <form action="{{ path('app_activity_remove', { 'id': activity.id }) }}" method="post" class="form-delete">
                <input type="hidden" name="token" value="{{ csrf_token('delete-activity-' ~ activity.id) }}">
                <button type="submit" class="btn-delete" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet élément ? Cette action est irréversible.')">
                    <img src="{{ asset('images/delete.png') }}" alt="Supprimer" class="btn-delete">
                </button>
            </form>
        {% endif %}
    </div>
</div>

